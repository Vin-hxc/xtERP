<!DOCTYPE HTML>
<html  lang="en">
<head>
    <meta charset="utf-8">
    <meta name="keywords" content="打卡日程">
    <meta name="description" content="Helloweba，在线演示HTML、CSS、jquery、PHP示例DEMO。">
    <title>打卡日程</title>
    <link rel="stylesheet" type="text/css" href="static/fullcalendar/css/main.css">
    <link rel="stylesheet" type="text/css" href="static/fullcalendar/css/fullcalendar.css">
    <style type="text/css">
        #calendar {
            width: 900px;
            margin: 20px auto 10px auto
        }
        .button{
            text-align: center;
        }
    </style>
    <script src='static/fullcalendar/js/jquery-1.9.1.min.js'></script>
    <script src='static/fullcalendar/js/jquery-ui-1.10.2.custom.min.js'></script>
    <script src='static/fullcalendar/js/fullcalendar.min.js'></script>
    <script src="static/js/winter/work/Date.js"></script>
    <script type="text/javascript">
        $(function() {
            var userId = $("#userId").val();
            var date = new Date();
            var d = date.getDate();
            var m = date.getMonth();
            var y = date.getFullYear();

            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                theme: false,
                monthNames: ["一", "二", "三", "四", "五", "六", "七", "八", "九", "十", "十一", "十二"],
                monthNamesShort: ["一", "二", "三", "四", "五", "六", "七", "八", "九", "十", "十一", "十二"],
                dayNames: ["周日", "周一", "周二", "周三", "周四", "周五", "周六"],
                dayNamesShort: ["周日", "周一", "周二", "周三", "周四", "周五", "周六"],
                today: ["今天"],
                buttonText: {
                    today: '今天',
                    month: '月',
                    week: '周',
                    day: '日'
                },
                firstDay: 1,
                editable: false, //支持Event日程拖动修改，默认false
                timeFormat: 'H:mm',
                axisFormat: 'H:mm',
                events:function(start, end, timezone, callback) {
                    currentTime();
                    $.ajax({
                        url: "work",
                        data:{'userId':1},
                        dataType:'json',
                        cache:false,
                        success:function(doc) {
                            var eventServer  = [];
                            var obj = doc;
                            console.log(obj);
                            for (var key in obj) {
                                var list = obj[key];
                                //var attendanceDate = list.attendanceDate;
                                var start = list.startTime;
                                debugger;
                                var startTime = hourMinuteSecond(startTime);
                                var endTime = list.endTime;
                                var id = list.id;
                                console.log(startTime)
                                /*$(list).each(function() {
                                    eventServer.push({
                                        title: '上班签到',
                                        start: startTime,
                                        id: id,
                                        className: 'label-info',
                                        allDay: false
                                    });
                                })*/
                                /* events.push({
                                     title: '上班签到',
                                     start: startTime,
                                     id: id,
                                     className: 'label-info',
                                     allDay: false
                                 });*/
                            }
                            callback(eventServer);
                        },
                        error:function() {
                            alert('出错啦！！请联系管理员！！');
                        }
                    })
                }
                /*
                events: function(start,end, callback) {
                    var view = $('#calendar').fullCalendar('getView');
                    var viewName = view.name;
                    $.ajax({
                        url: APP_DOMAIN+"/meetings/list_json",
                        dataType: 'json',
                        data: {
                            start: start.format(),
                            end: end.format()
                        },
                        success:function(doc) {
                            var eventServer =[];
                            $(doc).each(function() {
                                if (viewName == 'month') {
                                    eventServer.push({
                                        allDay:$(this).attr('allDay'),
                                        className:$(this).attr('className'),
                                        title:$(this).attr('title'),
                                        start:$(this).attr('start'),
                                        url:$(this).attr('url')
                                    });
                                }else{
                                    eventServer.push({
                                        allDay:$(this).attr('allDay'),
                                        className:$(this).attr('className'),
                                        title:$(this).attr('title'),
                                        start:$(this).attr('start'),
                                        end:$(this).attr('end'),
                                        url:$(this).attr('url')
                                    });
                                };
                            });
                            callback(eventServer);
                        }
                    });
                },*/
            });
        });
    </script>
</head>

<body>
<div id="main" style="width:80%">
    <h2 class="top_title"><a href="#">打卡考勤</a></h2>
    <div class="button">
        <button>上班打卡</button>
        <p>1.（法定上班时间为08:30:00，晚于该时间即为迟到。
            法定下班时间为18:00:00，早于该时间即为早退）;</p>
        <p>2.下班后还未进行上班打卡的员工，则视为旷工，当天则不允许打卡，
            如果当天忘记打卡，需第二天向领导进行申诉申请，并说明原因</p>
        <input type="hidden" name="userId" id="userId" value="1"/><!--th:value="${user.id}"-->
    </div>
    <div id='calendar'></div>
</div>
</body>

</html>

<!--
id	可选，事件唯一标识，重复的事件具有相同的id
title	必须，事件在日历上显示的title
allDay	可选，true or false，是否是全天事件。
start	必须，事件的开始时间。
end	可选，结束时间。
url	可选，当指定后，事件被点击将打开对应url。
className	指定事件的样式。
editable	事件是否可编辑，可编辑是指可以移动, 改变大小等。
source	指向次event的eventsource对象。
color	背景和边框颜色。
backgroundColor	背景颜色。
borderColor	边框颜色。
textColor	文本颜色。
-->